# CREATING THE FEED
## CREATING THE FEED
### CREATING THE FEED

1. [Collaborate via GitHub](#collaborate-via-GitHub)
2. [Data File Types](#data-file-types)
3. [Code Examples](#code-examples)
4. [Convert Flat Files](#convert-flat-files) **(TBA)**

### Collaborate via GitHub
GitHub is an open-source repository hosting service that allows for the storage and collaboration of data projects with version control (tracks changes and allows you to revert to previous iterations). The GitHub workflow is comprised of following steps:
- **Creating a Branch** - Branching allows you to make a copy of your project (i.e., the master branch) so that you maintain your master branch clean (i.e., free of changes). This copy lets you experiment with new features (e.g., new data fields).
- **Adding Commits** - A commit is any change made to your project that you can track allowing you to create a record of your work that others can use a reference.  
- **Opening a Pull Request** - Pull requests allows you to alert others on your team to let them reveiw and discuss your changes. 
- **Discussing and Reviewing Commits** - This part of the process allows reviewers on your team or the DAVI Data Team check that the spec is properly implemented (i.e., that data types are correctly specified in an .xsd file).
- **Merging to Master Branch** - Once your commits have been reviewed and approved you can push your changes to merge with the master branch. 

A more in-depth [tutorial is available here](https://guides.github.com/introduction/flow/).

To start collaborating via GitHub:
- [Join GitHub](https://github.com/) by creating a free [organization account and user accounts](https://help.github.com/articles/differences-between-user-and-organization-accounts/) for your team.
- If you are a data producer contact [Nate Deshmukh-towery](nate.deshmukh-towery@dot.gov) to request your own sub-repository to host your project.

#### How Do I Get Help?
To interact directly with the DAVI Data Team and to get help implementing the spec for your data post an **issue** under the **help wanted** label on the Work Zone GitHub site.

![Posting An Issue](https://github.com/usdot-jpo-ode/jpo-wzdx/blob/master/images/issues.png)

### Data File Types
The WZDx v1.1 data feed will be specified as an XML file or a JSON file. Both JSON and XML have been choosen as the file types of choice because they:
- Are a lighweight data exchange format.
- Are easy for humans to read and write.
- Are easy for machines to parse and generate. 

The file will contain one or more work zone activity entries. A work zone activity entry is defined as a description of work zone characteristics for a road segment along a single roadway in a single direction. The WorkZoneActivity data frame is composed of the [Common Core Data Dictionary elements (Table 1)](https://github.com/usdot-jpo-ode/jpo-wzdx/blob/master/data-tables/common-core-dictionary.md#table1.-common-core-data) and depicted in Figure 1.

#### Figure 1: Work Zone Activity Organization
*Note*: not all optional data elements are included in secondary levels of the hierarchy
![Fig. 1](https://github.com/acosta-dani-bah/ITS-JPO-wzdx/blob/master/images/Figure%201.png)

### Code Examples
The WZDx Activity frame code examples presented below were extracted from existing data feeds generated by several open data sites. 
Three examples of WorkZoneActivity records are shown below. They were derived from on-line data feeds including:
* [Example 1 – MassDOT Event Feed](https://github.com/usdot-jpo-ode/jpo-wzdx/blob/master/create-feed/massdot.md)
* [Example 2 – iCone Event Feed](https://github.com/usdot-jpo-ode/jpo-wzdx/blob/master/create-feed/icone.md)
* [Example 3 – Caltrans Lane Closure Feed](https://github.com/usdot-jpo-ode/jpo-wzdx/blob/master/create-feed/caltrans.md#json-implementation)

These examples use the following sample work zone activity template:

#### Sample Work Zone Activity Template
| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tag &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |
| --------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- |
| Identifier                                                                              |                                                                                           |
| subidentifier                                                                           |                                                                                           |
| StartDateTime<ul><li>startDateTime-est</li><li>startDateTime-ver</li></ul>              |                                                                                           |
| EndDateTime<ul><li>endDateTime-est</li><li>endDateTime-ver</li></ul>                    |                                                                                           |
| BeginLocation<ul><li>roadName</li><li>roadNum</li><li>latitude</li><li>longitude</li><li>milepost</li></ul> |                                                                       |
| EndLocation<ul><li>latitude</li><li>longitude</li><li>milepost</li></ul>                |                                                                                           |
| wz-Status                                                                               |                                                                                           |
| totalLanes                                                                              |                                                                                           |
| openLanes                                                                               |                                                                                           |
| closedLanes                                                                             |                                                                                           |
| closedShoulders                                                                         |                                                                                           |
| workersPresent                                                                          |                                                                                           |
| RoadRestrictions*<ul><li>roadRestrictions</li></ul>                                     |                                                                                           |
| description                                                                             |                                                                                           |
| issuingOrganization                                                                     |                                                                                           |
| timeStampEventCreation                                                                  |                                                                                           |
| timeStampEventUpdate                                                                    |                                                                                           |
### Convert Flat Files
#### (TBA)
